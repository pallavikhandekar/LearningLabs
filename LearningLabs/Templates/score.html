<!DOCTYPE html>
{% extends "index.html" %}

{% block content %}

{% load staticfiles %}

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <style type="text/css">
.txtfld{ width:50px;}
.printer-row{border-collapse: collapse;}
.printer-row td{border:1px solid #ccc;}
</style>

<script>
$(document).ready(function(){
         $('.txtfld').bind({
                keyup:function(){

             //total calculation
                        $(".printer-type tr:not(:first, last) td:last-child").text(function () {
                            var totalVal = 0;
                            $(this).prevAll().each(function () {
                                totalVal += parseInt($(this).children('.txtfld').val()) || 0;
                                //totalVal += parseInt( );
                            });
                            return totalVal;
                        });

                        $(".printer-type tr:last td").text(function (i) {
                            var totalVal = 0;
                            $(this).parent().prevAll().find("td:nth-child(" + (++i) + ")").each(function () {
                                totalVal += parseInt($(this).children('.txtfld').val()) || 0;
                                $(".printer-type tr:last td:first").text('Total sheets/year');
                            });
                            return totalVal;

                        });
                        //Total calculation
                }
            });
     $('#savescores').click(function(){
         var team1sc = document.getElementById("team1").innerHTML;
         var team2sc = document.getElementById("team2").innerHTML;
         document.getElementById("team1score").value =team1sc ;
         document.getElementById("team2score").value =team2sc ;
         alert(document.getElementById("team1score").value);


    });
    
    	var rowElem1 = document.getElementById("rowQuestion_1")
    	var rowElem2 = document.getElementById("rowAns_1")
    	if (typeof(rowElem1) != 'undefined' && rowElem1 != null && typeof(rowElem2) != 'undefined' && rowElem2 != null){
    		rowElem1.style.display = "block";
    		rowElem2.style.display = "block";
    	}
    });
    
    function onNextButtonClick(){
    
    }
    
    function onPrevButtonClick(){
    
    }
</script>

<div >
<form class="form-horizontal" role="form" method="post" action="/saveScore" id="scoreform">
{% csrf_token %}
<hr>
<h3 style="align-content: center">Current Quiz :: {{quizId}}</h3>
<h4 style="align-content: center">No of Questions :: {{questionCount}}</h4>

<div>
	<div>
		<table>
			{% for answers in gameData %}
			<tr id="rowQuestion_{{forloop.counter}}" style="display:none;">
				<td>
					{{answers.0.question}}
				</td>
			</tr>
			<tr id="rowAns_{{forloop.counter}}" style="display:none;">
				<td>
					<button onClick="onPrevButtonClick">Prev Question</button>
				</td>
				<td>
				 {% for o in answers %}
				 <div>
					 {{o.answer}}
				 </div>
				{% endfor %}
				<td>
				<td>
					<button onClick="onNextButtonClick">Next Question</button>
				</td>
			</tr>
			{% endfor %}
		</table>
	</div>
</div>
<div class="printer-type">

<table width="580" border="0" class="printer-row">

  <tr>
    <td>&nbsp;</td>
    <td>Team 1</td>
    <td>Team 2</td>
    <td>Total sheets/year</td>
  </tr>
  {% for quiz in quizzes %}
  <tr>
   <td>{{quiz.question}}</td>
   <td><input type="text" class="txtfld" placeholder="edit"></td>
   <td><input type="text" class="txtfld" placeholder="edit"></td>
   <td> </td>
 </tr>
 {% endfor %}
  <tr id="scoretable">
    <td>Scores</td>
    <td id="team1">&nbsp;</td>
    <td id="team2">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
    <br>
 <input type="hidden" class="form-control" type="text" id ="team1score" name="team1score">
 <input type="hidden" class="form-control" type="text" id="team2score" name="team2score">
<button id="savescores"> Save Scores </button>
</div>
</form>
</div>

  {% endblock %}

